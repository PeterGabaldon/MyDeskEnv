#! /bin/bash

# Pedro Gabaldon (PeterG11)
# https://petergabaldon.github.io/

# Colors
NOCOLOR='\033[0m'
RED='\033[0;31m'
GREEN='\033[0;32m'
ORANGE='\033[0;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
LIGHTGRAY='\033[0;37m'
DARKGRAY='\033[1;30m'
LIGHTRED='\033[1;31m'
LIGHTGREEN='\033[1;32m'
YELLOW='\033[1;33m'
LIGHTBLUE='\033[1;34m'
LIGHTPURPLE='\033[1;35m'
LIGHTCYAN='\033[1;36m'
WHITE='\033[1;37m'

# Clone repo to geit config files
git clone https://github.com/PeterGabaldon/MyDeskEnv.git ~/MyDeskEnv

echo "Sudo will ask for password when needed (I suppose current user is a sudoer)"

export DEBIAN_FRONTEND=nointeractive
echo "Updating apt cache..."
sudo apt update

# First, install zsh and make it default shell
echo "Ok, I will install zsh and make it default first"
sudo apt install zsh
chsh -s $(which zsh)

echo "Getting powerlevel10k theme for zsh"
# Get P10K
git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k

echo "Installing zsh plugins..."
# Install zsh plugins
sudo git clone https://github.com/zsh-users/zsh-autosuggestions.git /usr/share/zsh-autosuggestions
sudo git clone https://github.com/zsh-users/zsh-syntax-highlighting.git /usr/share/zsh-syntax-highlighting
sudo git clone https://github.com/ohmyzsh/ohmyzsh/blob/master/plugins/sudo/sudo.plugin.zsh /usr/share/zsh-sudo

# Bat and bat-extras
echo "Installing bat, the cat clone with wings :P, and bat-extras"
sudo apt install bat

git clone https://github.com/eth-p/bat-extras.git ~/bat-extras
sudo ~/bat-extras/install.sh

# lsd
echo "Installing lsd..."
wget -qP ~/ https://github.com/Peltoche/lsd/releases/download/0.20.1/lsd_0.20.1_amd64.deb
sudo dpkg -i ~/lsd_0.20.1_amd64.deb

# tpm
echo "Installing tpm"
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

echo "Remember to press Ctrl+a and the I in a tmux session to install it"

# Sublime text
echo "Installing sublime text"
wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -
sudo apt install apt-transport-https

sudo echo "deb https://download.sublimetext.com/ apt/stable/" > /etc/apt/sources.list.d/sublime-text.list
sudo apt update
sudo apt install sublime-text

# Install HackNerd font
sudo unzip ~/MyDeskEnv/Hack.zip -d /usr/share/fonts

sudo apt install wmctrl

# Move config files
echo "Copying all config files..."
cd ~/MyDeskEnv/
cp -a .p10k.zsh .tmux.conf .vimrc .zshrc .vim -t ~/

# Change background
sudo apt install gsettings
gsettings set org.mate.background picture-filename "~/MyDeskEnv/background.jpg"

echo "I will the system now..."
sleep 3 && reboot
